<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Inscription Blindtest</title>
<style>
body {background:#181c2f;color:#fff;font-family:'Segoe UI',Arial,sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;margin:0;}
.register-container {background:#23284a;padding:2rem 3rem;border-radius:16px;box-shadow:0 4px 24px rgba(0,0,0,0.2);text-align:center;}
input, button {padding:0.8rem 1.2rem;border-radius:8px;border:none;font-size:1rem;margin:0.5rem 0;}
button {background:#4f5dff;color:#fff;cursor:pointer;transition:background 0.2s;}
button:hover {background:#3741b5;}
</style>
</head>
<body>

<div class="register-container">
  <h1>Inscription</h1>
  <input type="text" id="playerName" placeholder="Votre nom"><br>
  <button id="registerBtn">S'inscrire</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBaWatcA83qeeStPCwwq4HMOQ6UwGqBWIc",
  authDomain: "madmax2-20cb7.firebaseapp.com",
  projectId: "madmax2-20cb7"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const registerBtn = document.getElementById("registerBtn");
const playerNameInput = document.getElementById("playerName");

registerBtn.addEventListener("click", async () => {
    const name = playerNameInput.value.trim();
    if(!name) return alert("Veuillez entrer un nom !");

    // Ajouter le joueur dans Firestore
    await db.collection("participants").doc(name).set({
        name: name,
        status: "en_attente",
        joinedAt: firebase.firestore.FieldValue.serverTimestamp()
    });

    // Rediriger vers la page de jeu du participant
    window.location.href = "participant.html?player=" + encodeURIComponent(name);
});
</script>
</body>
</html>

